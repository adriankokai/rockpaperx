<!DOCTYPE html>

<html>
    <head>
        <title>Rock Paper X</title>
    </head>
    <div id="results-container"></div>
    <button id="rock">rock</button>
    <button id="paper">paper</button>
    <button id="scissors">scissors</button>
</html>

<script>
    let playerPoints = 0;
    let computerPoints = 0;

    function computerPlay() {
        options = ['rock', 'paper', 'scissors'];
        return options[Math.floor(Math.random() * options.length)] 
    }

    function playRound(playerSelection, computerSelection){
        playerSelection = playerSelection.toLowerCase();
        computerSelection = computerSelection.toLowerCase();
        if (playerSelection == computerSelection) {
            return 'draw';
        } else if (playerSelection == 'rock' && computerSelection == 'paper') {
            return 'computer wins, paper beats rock';
        } else if (playerSelection == 'rock' && computerSelection == 'scissors') {
            return 'player wins, rock beats scissors';
        } else if (playerSelection == 'paper' && computerSelection == 'scissors' ) {
            return 'computer wins, scissors beats paper';
        } else if (computerSelection == 'rock' && playerSelection == 'paper'){
            return 'player wins, paper beats rock';
        } else if (computerSelection == 'rock' && playerSelection == 'scissors'){
            return 'computer wins, rock beats scissors';
        } else if (computerSelection == 'paper' && playerSelection == 'scissors'){
            return 'player wins, scissors beats paper';
        } else { return console.error(); }
    }

    function game (playerSelection) {
        let winner = playRound(playerSelection, computerPlay())
        addPoint(winner)
    }

    function addPoint (winner) {
        let winnerPara = document.createElement('p');
        winnerPara.textContent = winner;

        let resultsContainer = document.querySelector('#results-container')
        resultsContainer.appendChild(winnerPara)

        if (winner.startsWith('player')) {
            playerPoints += 1;
        } else if (winner.startsWith('computer')) {
             computerPoints += 1 
        }

        if (playerPoints == 5 || computerPoints == 5) {
            let gameWinner = (playerPoints > computerPoints) ? 'PLAYER WINS GAME!':'COMPUTER WINS GAME!'
            playerPoints = 0
            computerPoints = 0
            resultsContainer.innerHTML += gameWinner 
        }  
        

    }

    const buttons = document.querySelectorAll('button');

    buttons.forEach((button) => {
        button.addEventListener('click', () => {
            game(button.id)
        })
    })

</script>